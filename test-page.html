<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>US Code Navigator - Test Page</title>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script>
        // Sample JSON Data for Testing
        const DATA = {
            modelCodes: [
                {ModelCodeID: "IBC", ModelCodeName: "IBC", Description: "International Building Code"},
                {ModelCodeID: "NFPA13", ModelCodeName: "NFPA 13", Description: "Standard for Sprinkler Systems"},
                {ModelCodeID: "NEC", ModelCodeName: "NEC", Description: "National Electrical Code"}
            ],
            modelCodeVersions: [
                {ModelCodeVersionID: "IBC2021", ModelCodeID: "IBC", Year: 2021},
                {ModelCodeVersionID: "NFPA13-2022", ModelCodeID: "NFPA13", Year: 2022}
            ],
            codeContent: [
                {ModelCodeID: "IBC", Chapter: 1, Section: "101", TitleEN: "General", ContentEN: "This is the general section of IBC."},
                {ModelCodeID: "IBC", Chapter: 1, Section: "102", TitleEN: "Scope", ContentEN: "This defines the scope."},
                {ModelCodeID: "IBC", Chapter: 2, Section: "201", TitleEN: "Definitions", ContentEN: "Definitions section."},
                {ModelCodeID: "NFPA13", Chapter: 1, Section: "1.1", TitleEN: "Scope", ContentEN: "NFPA 13 scope section."}
            ],
            codeChapters: [
                {Chapter: 1, TitleEN: "General Provisions", ModelCodeVersionID: "IBC2021"},
                {Chapter: 2, TitleEN: "Definitions", ModelCodeVersionID: "IBC2021"}
            ],
            codeAttachment: []
        };
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background-color: #F8F9FA;
            color: #2C3E50;
            line-height: 1.6;
        }

        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 240px;
            height: 100vh;
            background-color: #FFFFFF;
            border-right: 1px solid #DEE2E6;
            padding: 24px 0;
            overflow-y: auto;
            z-index: 200;
        }

        .sidebar-logo {
            font-size: 18px;
            font-weight: 700;
            color: #2C3E50;
            padding: 0 20px 24px 20px;
            border-bottom: 1px solid #DEE2E6;
            cursor: pointer;
        }

        .sidebar-menu {
            list-style: none;
        }

        .sidebar-menu li {
            margin: 0;
        }

        .sidebar-menu a {
            display: flex;
            align-items: center;
            padding: 10px 20px;
            color: #2C3E50;
            text-decoration: none;
            font-size: 14px;
            transition: all 0.2s;
            cursor: pointer;
        }

        .sidebar-menu a:hover {
            background-color: #F8F9FA;
        }

        .sidebar-menu a.active {
            background-color: #3498DB;
            color: #FFFFFF;
        }

        .sidebar-menu a i {
            margin-right: 12px;
            width: 18px;
            height: 18px;
        }

        .submenu {
            list-style: none;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .submenu.open {
            max-height: 1000px;
        }

        .submenu li a {
            padding-left: 52px;
            font-size: 13px;
        }

        .submenu li a i {
            width: 14px;
            height: 14px;
            margin-right: 8px;
        }

        .submenu li a.disabled {
            color: #ADB5BD;
            opacity: 0.6;
        }

        .menu-toggle {
            margin-left: auto;
            transition: transform 0.3s;
            width: 16px;
            height: 16px;
        }

        .menu-toggle.open {
            transform: rotate(90deg);
        }

        .header {
            background-color: #FFFFFF;
            border-bottom: 1px solid #DEE2E6;
            padding: 16px 32px 16px 272px;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: center;
            align-items: center;
            max-width: 1600px;
            margin: 0 auto;
        }

        .search-bar {
            width: 600px;
            position: relative;
            display: flex;
            align-items: center;
        }

        .search-bar input {
            width: 100%;
            padding: 10px 16px 10px 40px;
            border: 1px solid #DEE2E6;
            border-radius: 4px;
            font-size: 14px;
            background-color: #F8F9FA;
        }

        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #6C757D;
            width: 18px;
            height: 18px;
        }

        .main-container {
            margin-left: 240px;
            padding: 32px;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .hero {
            background-color: #34495E;
            color: #FFFFFF;
            padding: 64px 32px;
            text-align: center;
            border-radius: 8px;
            margin-bottom: 32px;
        }

        .hero h1 {
            font-size: 42px;
            font-weight: 700;
            margin-bottom: 16px;
        }

        .hero p {
            font-size: 18px;
            margin-bottom: 32px;
            opacity: 0.9;
        }

        .btn {
            padding: 12px 24px;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            border: none;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .btn-primary {
            background-color: #3498DB;
            color: #FFFFFF;
        }

        .btn-primary:hover {
            background-color: #2980B9;
        }

        .btn i {
            width: 16px;
            height: 16px;
            margin-right: 8px;
        }

        .section-title {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 24px;
            color: #2C3E50;
        }

        .quick-actions-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 24px;
            margin-bottom: 48px;
        }

        .action-card {
            background-color: #FFFFFF;
            border: 1px solid #DEE2E6;
            border-radius: 8px;
            padding: 32px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .action-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }

        .action-icon {
            width: 48px;
            height: 48px;
            background-color: #F8F9FA;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 16px;
        }

        .action-icon i {
            width: 28px;
            height: 28px;
            color: #3498DB;
        }

        .action-card h3 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #2C3E50;
        }

        .action-card p {
            font-size: 14px;
            color: #6C757D;
        }

        .codes-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 24px;
        }

        .code-card {
            background-color: #FFFFFF;
            border: 1px solid #DEE2E6;
            border-radius: 8px;
            padding: 24px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .code-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }

        .code-card h3 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #2C3E50;
        }

        .code-meta {
            display: flex;
            gap: 16px;
            font-size: 13px;
            color: #6C757D;
        }

        .code-meta i {
            width: 14px;
            height: 14px;
            margin-right: 4px;
        }

        .code-badge {
            display: inline-flex;
            align-items: center;
            background-color: #3498DB;
            color: #FFFFFF;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 12px;
        }

        .code-badge i {
            width: 14px;
            height: 14px;
            margin-right: 6px;
        }

        .code-card.disabled {
            opacity: 0.5;
            background-color: #F8F9FA;
            cursor: default;
        }

        .code-card.disabled .code-badge {
            background-color: #DEE2E6;
            color: #ADB5BD;
        }

        .code-card.disabled:hover {
            box-shadow: none;
            transform: none;
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <div class="sidebar-logo" onclick="document.querySelector('.sidebar-menu a').click()">US Code Navigator TEST</div>
        <div class="sidebar-section">
            <ul class="sidebar-menu">
                <li><a class="active" onclick="setActiveMenu(this); showPage('home')"><i data-lucide="home"></i> Home</a></li>
                <li>
                    <a onclick="toggleSubmenu(this)">
                        <i data-lucide="library"></i> 라이브러리
                        <i data-lucide="chevron-right" class="menu-toggle"></i>
                    </a>
                    <ul class="submenu" id="librarySubmenu"></ul>
                </li>
                <li><a onclick="setActiveMenu(this); showPage('comparison')"><i data-lucide="git-compare"></i> 코드비교</a></li>
            </ul>
        </div>
    </div>

    <div class="header">
        <div class="header-content">
            <div class="search-bar">
                <i data-lucide="search" class="search-icon"></i>
                <input type="text" id="globalSearch" placeholder="Search US codes...">
            </div>
        </div>
    </div>

    <div class="main-container">
        <div id="homePage" class="page active">
            <div class="hero">
                <h1>US Code Navigator - Test Page</h1>
                <p>Testing structure and functionality with sample data</p>
            </div>

            <h2 class="section-title">Quick Actions</h2>
            <div class="quick-actions-grid">
                <div class="action-card">
                    <div class="action-icon"><i data-lucide="search"></i></div>
                    <h3>고급검색</h3>
                    <p>고급 필터를 사용하여 모든 미국 법규 검색</p>
                </div>
                <div class="action-card" onclick="setActiveMenu(null); showPage('comparison')">
                    <div class="action-icon"><i data-lucide="git-compare"></i></div>
                    <h3>코드비교</h3>
                    <p>다양한 코드 버전의 나란히 비교</p>
                </div>
            </div>

            <h2 class="section-title">Featured Codes</h2>
            <div class="codes-grid" id="featuredCodes"></div>
        </div>

        <div id="codeDetailPage" class="page">
            <div id="codeDetailContent"></div>
        </div>

        <div id="comparisonPage" class="page">
            <h1 class="section-title">Code Comparison Tool</h1>
            <p style="color: #6C757D;">Compare different code versions side by side</p>
        </div>
    </div>

    <script>
        function toggleSubmenu(element) {
            const submenu = element.nextElementSibling;
            const toggle = element.querySelector('.menu-toggle');
            submenu.classList.toggle('open');
            toggle.classList.toggle('open');
        }

        function populateLibrarySubmenu() {
            const submenu = document.getElementById('librarySubmenu');
            const codesWithData = DATA.modelCodes.map(code => {
                const hasContent = DATA.codeContent.some(c => c.ModelCodeID === code.ModelCodeID);
                return { ...code, hasContent };
            });
            codesWithData.sort((a, b) => {
                if (a.hasContent && !b.hasContent) return -1;
                if (!a.hasContent && b.hasContent) return 1;
                return a.ModelCodeName.localeCompare(b.ModelCodeName);
            });
            submenu.innerHTML = codesWithData.map(code => `
                <li><a onclick="showCodeDetail('${code.ModelCodeID}')" class="${code.hasContent ? '' : 'disabled'}">
                    <i data-lucide="file-text"></i> ${code.ModelCodeName}
                </a></li>
            `).join('');
            lucide.createIcons();
        }

        function showCodeDetail(modelCodeId) {
            setActiveMenu(null);
            const code = DATA.modelCodes.find(c => c.ModelCodeID === modelCodeId);
            if (!code) return;
            const contents = DATA.codeContent.filter(c => c.ModelCodeID === modelCodeId);
            if (contents.length === 0) return;

            const detailContent = document.getElementById('codeDetailContent');
            detailContent.innerHTML = `
                <h1 class="section-title">${code.ModelCodeName}</h1>
                <p style="color: #6C757D; margin-bottom: 24px;">${code.Description || ''}</p>
                <div class="code-meta" style="margin-bottom: 32px;">
                    <span><i data-lucide="file-text"></i> ${contents.length} Sections</span>
                </div>
                ${contents.map(content => `
                    <div style="background: #FFF; padding: 24px; border-radius: 8px; margin-bottom: 16px; border: 1px solid #DEE2E6;">
                        <div style="font-weight: 600; color: #2C3E50; margin-bottom: 8px;">Section ${content.Section}: ${content.TitleEN}</div>
                        <div style="color: #6C757D;">${content.ContentEN}</div>
                    </div>
                `).join('')}
            `;
            showPage('codeDetail');
            lucide.createIcons();
        }

        function populateFeaturedCodes() {
            const container = document.getElementById('featuredCodes');
            const codesWithInfo = DATA.modelCodes.map(code => {
                const sections = DATA.codeContent.filter(c => c.ModelCodeID === code.ModelCodeID).length;
                const versions = DATA.modelCodeVersions.filter(v => v.ModelCodeID === code.ModelCodeID);
                return { ...code, sections, versions: versions.length, hasData: sections > 0 };
            });
            codesWithInfo.sort((a, b) => {
                if (a.hasData && !b.hasData) return -1;
                if (!a.hasData && b.hasData) return 1;
                return 0;
            });
            container.innerHTML = codesWithInfo.map(code => `
                <div class="code-card ${code.hasData ? '' : 'disabled'}" onclick="${code.hasData ? `showCodeDetail('${code.ModelCodeID}')` : ''}">
                    <div class="code-badge"><i data-lucide="book-open"></i> ${code.ModelCodeName}</div>
                    <h3>${code.Description || code.ModelCodeName}</h3>
                    <div class="code-meta">
                        ${code.hasData ? `
                            <span><i data-lucide="file-text"></i> ${code.sections} Sections</span>
                            <span><i data-lucide="calendar"></i> ${code.versions} Versions</span>
                        ` : `
                            <span><i data-lucide="alert-circle"></i> No data available</span>
                        `}
                    </div>
                </div>
            `).join('');
            lucide.createIcons();
        }

        function showPage(pageName) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            const pages = {
                'home': 'homePage',
                'comparison': 'comparisonPage',
                'codeDetail': 'codeDetailPage'
            };
            const pageId = pages[pageName];
            if (pageId) {
                document.getElementById(pageId).classList.add('active');
            }
        }

        function setActiveMenu(element) {
            document.querySelectorAll('.sidebar-menu > li > a').forEach(a => a.classList.remove('active'));
            if (element) {
                element.classList.add('active');
            }
        }

        function init() {
            populateLibrarySubmenu();
            populateFeaturedCodes();
            lucide.createIcons();
        }

        init();
    </script>
</body>
</html>
