<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Library - US Code Navigator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            background-color: #F8F9FA;
            color: #2C3E50;
            line-height: 1.6;
        }

        /* Header */
        .header {
            background-color: #FFFFFF;
            border-bottom: 1px solid #DEE2E6;
            padding: 16px 32px;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1600px;
            margin: 0 auto;
        }

        .logo {
            font-size: 20px;
            font-weight: 600;
            color: #2C3E50;
        }

        .search-bar {
            flex: 1;
            max-width: 500px;
            margin: 0 32px;
            position: relative;
        }

        .search-bar input {
            width: 100%;
            padding: 10px 16px 10px 40px;
            border: 1px solid #DEE2E6;
            border-radius: 4px;
            font-size: 14px;
            background-color: #F8F9FA;
        }

        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #6C757D;
        }

        .header-actions {
            display: flex;
            gap: 16px;
            align-items: center;
        }

        .header-btn {
            padding: 8px 16px;
            background-color: transparent;
            border: 1px solid #DEE2E6;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            color: #2C3E50;
            text-decoration: none;
        }

        /* Main Content */
        .main-content {
            max-width: 1600px;
            margin: 0 auto;
            padding: 32px;
        }

        .page-header {
            margin-bottom: 32px;
        }

        .page-header h1 {
            font-size: 32px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #2C3E50;
        }

        .page-header p {
            color: #6C757D;
            font-size: 14px;
        }

        .controls-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            flex-wrap: wrap;
            gap: 16px;
        }

        .view-controls {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .view-btn {
            padding: 8px 12px;
            background-color: #FFFFFF;
            border: 1px solid #DEE2E6;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            color: #2C3E50;
        }

        .view-btn.active {
            background-color: #2C3E50;
            color: #FFFFFF;
        }

        .sort-controls {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .sort-controls select {
            padding: 8px 12px;
            border: 1px solid #DEE2E6;
            border-radius: 4px;
            font-size: 14px;
            background-color: #FFFFFF;
        }

        /* Filters */
        .filters-section {
            background-color: #FFFFFF;
            border: 1px solid #DEE2E6;
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 32px;
        }

        .filters-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .filters-title {
            font-size: 16px;
            font-weight: 600;
            color: #2C3E50;
        }

        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .filter-group label {
            font-size: 13px;
            font-weight: 500;
            color: #2C3E50;
        }

        .filter-group select {
            padding: 8px 12px;
            border: 1px solid #DEE2E6;
            border-radius: 4px;
            font-size: 14px;
            background-color: #FFFFFF;
        }

        .reset-btn {
            padding: 8px 16px;
            background-color: transparent;
            border: 1px solid #DEE2E6;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            color: #6C757D;
        }

        .reset-btn:hover {
            background-color: #F8F9FA;
        }

        /* Image Grid */
        .images-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .image-card {
            background-color: #FFFFFF;
            border: 1px solid #DEE2E6;
            border-radius: 8px;
            overflow: hidden;
            transition: all 0.3s;
            cursor: pointer;
        }

        .image-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }

        .image-placeholder {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, #667EEA 0%, #764BA2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #FFFFFF;
            font-size: 48px;
            position: relative;
        }

        .image-placeholder.table {
            background: linear-gradient(135deg, #4B6CB7 0%, #182848 100%);
        }

        .image-placeholder.figure {
            background: linear-gradient(135deg, #56AB2F 0%, #A8E063 100%);
        }

        .image-type-badge {
            position: absolute;
            top: 12px;
            right: 12px;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            color: #2C3E50;
        }

        .image-info {
            padding: 16px;
        }

        .image-tags {
            display: flex;
            gap: 6px;
            margin-bottom: 8px;
            flex-wrap: wrap;
        }

        .image-tag {
            background-color: #F8F9FA;
            color: #6C757D;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
        }

        .image-title {
            font-size: 15px;
            font-weight: 600;
            color: #2C3E50;
            margin-bottom: 6px;
            line-height: 1.4;
        }

        .image-subtitle {
            font-size: 13px;
            color: #6C757D;
            margin-bottom: 12px;
        }

        .image-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 12px;
            border-top: 1px solid #F0F0F0;
        }

        .image-location {
            font-size: 12px;
            color: #6C757D;
        }

        .image-actions {
            display: flex;
            gap: 6px;
        }

        .icon-btn {
            width: 28px;
            height: 28px;
            border: none;
            background-color: transparent;
            cursor: pointer;
            color: #6C757D;
            border-radius: 4px;
            font-size: 14px;
        }

        .icon-btn:hover {
            background-color: #F8F9FA;
        }

        /* Image Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            z-index: 1000;
            overflow-y: auto;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: #FFFFFF;
            border-radius: 8px;
            width: 90%;
            max-width: 1200px;
            max-height: 90vh;
            overflow-y: auto;
            margin: 32px;
        }

        .modal-header {
            padding: 24px 32px;
            border-bottom: 1px solid #DEE2E6;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .modal-title-section {
            flex: 1;
        }

        .modal-title {
            font-size: 20px;
            font-weight: 600;
            color: #2C3E50;
            margin-bottom: 8px;
        }

        .modal-subtitle {
            font-size: 14px;
            color: #6C757D;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: #6C757D;
            padding: 0;
            width: 32px;
            height: 32px;
            line-height: 1;
        }

        .close-btn:hover {
            color: #2C3E50;
        }

        .modal-body {
            padding: 32px;
        }

        .modal-image-container {
            background-color: #F8F9FA;
            border-radius: 8px;
            padding: 48px;
            text-align: center;
            margin-bottom: 24px;
        }

        .modal-image-placeholder {
            width: 100%;
            max-width: 800px;
            height: 500px;
            margin: 0 auto;
            background: linear-gradient(135deg, #667EEA 0%, #764BA2 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #FFFFFF;
            font-size: 72px;
        }

        .image-url-note {
            background-color: #FFF3CD;
            border: 1px solid #FFE69C;
            border-radius: 6px;
            padding: 12px 16px;
            margin-top: 16px;
            font-size: 13px;
            color: #856404;
        }

        .modal-details {
            background-color: #F8F9FA;
            border-radius: 8px;
            padding: 20px;
        }

        .detail-row {
            display: flex;
            padding: 12px 0;
            border-bottom: 1px solid #DEE2E6;
        }

        .detail-row:last-child {
            border-bottom: none;
        }

        .detail-label {
            font-weight: 600;
            color: #2C3E50;
            width: 150px;
            flex-shrink: 0;
        }

        .detail-value {
            color: #6C757D;
            flex: 1;
        }

        .results-count {
            color: #6C757D;
            font-size: 14px;
            margin-bottom: 16px;
        }

        .no-results {
            text-align: center;
            padding: 64px 32px;
            color: #6C757D;
        }

        .no-results-icon {
            font-size: 48px;
            margin-bottom: 16px;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="header-content">
            <div class="logo">US Code Navigator</div>
            <div class="search-bar">
                <span class="search-icon">🔍</span>
                <input type="text" id="searchInput" placeholder="Search images, diagrams, charts..." oninput="filterImages()">
            </div>
            <div class="header-actions">
                <button class="header-btn" onclick="openFilters()">🎚️ Filters</button>
                <a href="index.html" class="header-btn">Back to Home</a>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Page Header -->
        <div class="page-header">
            <h1>Image Library</h1>
            <p>Browse and search technical diagrams, charts, and illustrations from US codes</p>
        </div>

        <!-- Controls Bar -->
        <div class="controls-bar">
            <div class="view-controls">
                <span style="font-size:13px;color:#6C757D;margin-right:8px;">View:</span>
                <button class="view-btn active" onclick="setView('grid')">◫ Grid</button>
                <button class="view-btn" onclick="setView('list')">☰ List</button>
            </div>

            <div class="sort-controls">
                <label style="font-size:13px;color:#6C757D;">Sort by:</label>
                <select id="sortBy" onchange="sortImages()">
                    <option value="recent">Most Recent</option>
                    <option value="code">Code Type</option>
                    <option value="chapter">Chapter</option>
                    <option value="type">Image Type</option>
                </select>

                <label style="font-size:13px;color:#6C757D;">Show:</label>
                <select id="perPage" onchange="updatePerPage()">
                    <option value="12">12 per page</option>
                    <option value="24">24 per page</option>
                    <option value="48">48 per page</option>
                    <option value="all">All</option>
                </select>
            </div>
        </div>

        <!-- Filters Section -->
        <div class="filters-section" id="filtersSection">
            <div class="filters-header">
                <h3 class="filters-title">Filters</h3>
                <button class="reset-btn" onclick="resetFilters()">🔄 Reset</button>
            </div>

            <div class="filters-grid">
                <div class="filter-group">
                    <label>Code Type</label>
                    <select id="filterCodeType" onchange="filterImages()">
                        <option value="">All Codes</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label>Chapter</label>
                    <select id="filterChapter" onchange="filterImages()">
                        <option value="">All Chapters</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label>Image Type</label>
                    <select id="filterImageType" onchange="filterImages()">
                        <option value="">All Types</option>
                        <option value="T">Table (T)</option>
                        <option value="F">Figure (F)</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label>Discipline</label>
                    <select id="filterDiscipline" onchange="filterImages()">
                        <option value="">All Disciplines</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Results Count -->
        <div class="results-count" id="resultsCount">Loading images...</div>

        <!-- Images Grid -->
        <div class="images-grid" id="imagesGrid">
            <!-- Images will be populated here -->
        </div>
    </div>

    <!-- Image Modal -->
    <div id="imageModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-section">
                    <div class="modal-title" id="modalTitle">Image Title</div>
                    <div class="modal-subtitle" id="modalSubtitle">Subtitle</div>
                </div>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-image-container">
                    <div class="modal-image-placeholder" id="modalImagePlaceholder">
                        📊
                    </div>
                    <div class="image-url-note">
                        💡 <strong>Image Placeholder:</strong> Upload actual images to your wiki page and reference them here by updating the image URL in the data.
                    </div>
                </div>

                <div class="modal-details" id="modalDetails">
                    <!-- Details will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Load JSON data
        let attachments = [];
        let modelCodes = [];
        let modelCodeVersions = [];
        let codeChapters = [];
        let disciplines = [];
        let modelCodeDiscipline = [];
        let filteredAttachments = [];

        // Load data
        async function loadData() {
            try {
                const [att, mc, mcv, ch, d, mcd] = await Promise.all([
                    fetch('CodeAttachment.json').then(r => r.json()),
                    fetch('ModelCode.json').then(r => r.json()),
                    fetch('ModelCodeVersion.json').then(r => r.json()),
                    fetch('CodeChapter.json').then(r => r.json()),
                    fetch('Discipline.json').then(r => r.json()),
                    fetch('ModelCodeDiscipline.json').then(r => r.json())
                ]);

                attachments = att;
                modelCodes = mc;
                modelCodeVersions = mcv;
                codeChapters = ch;
                disciplines = d;
                modelCodeDiscipline = mcd;

                filteredAttachments = [...attachments];

                populateFilters();
                displayImages();
            } catch (error) {
                console.error('Error loading data:', error);
                document.getElementById('resultsCount').textContent = 'Error loading images';
            }
        }

        function populateFilters() {
            // Populate Code Types
            const codeTypeFilter = document.getElementById('filterCodeType');
            const uniqueVersions = [...new Set(attachments.map(a => a.ModelCodeVersionID))];

            uniqueVersions.forEach(versionId => {
                const version = modelCodeVersions.find(v => v.ModelCodeVersionID === versionId);
                if (version) {
                    const code = modelCodes.find(c => c.ModelCodeID === version.ModelCodeID);
                    if (code) {
                        const option = new Option(
                            `${code.ModelCodeName} ${version.Year || ''}`,
                            versionId
                        );
                        codeTypeFilter.add(option);
                    }
                }
            });

            // Populate Chapters
            const chapterFilter = document.getElementById('filterChapter');
            const uniqueChapters = [...new Set(attachments.map(a => a.Chapter))].sort((a, b) => a - b);

            uniqueChapters.forEach(chapter => {
                const option = new Option(`Chapter ${chapter}`, chapter);
                chapterFilter.add(option);
            });

            // Populate Disciplines
            const disciplineFilter = document.getElementById('filterDiscipline');
            disciplines.forEach(d => {
                const option = new Option(`${d.DisciplineNameEN} (${d.DisciplineNameKR})`, d.DisciplineID);
                disciplineFilter.add(option);
            });
        }

        function filterImages() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const codeType = document.getElementById('filterCodeType').value;
            const chapter = document.getElementById('filterChapter').value;
            const imageType = document.getElementById('filterImageType').value;
            const discipline = document.getElementById('filterDiscipline').value;

            filteredAttachments = attachments.filter(att => {
                let matches = true;

                // Search filter
                if (searchTerm) {
                    const titleMatch = (att.AttachTitleEN && att.AttachTitleEN.toLowerCase().includes(searchTerm)) ||
                                      (att.AttachTitleKR && att.AttachTitleKR.includes(searchTerm));
                    const contentMatch = (att.AttachContentEN && att.AttachContentEN.toLowerCase().includes(searchTerm)) ||
                                        (att.AttachContentKR && att.AttachContentKR.includes(searchTerm));
                    matches = matches && (titleMatch || contentMatch);
                }

                // Code type filter
                if (codeType) {
                    matches = matches && att.ModelCodeVersionID === codeType;
                }

                // Chapter filter
                if (chapter) {
                    matches = matches && att.Chapter.toString() === chapter;
                }

                // Image type filter
                if (imageType) {
                    matches = matches && att.Type === imageType;
                }

                // Discipline filter
                if (discipline) {
                    const version = modelCodeVersions.find(v => v.ModelCodeVersionID === att.ModelCodeVersionID);
                    if (version) {
                        const mcd = modelCodeDiscipline.find(m =>
                            m.ModelCodeID === version.ModelCodeID && m.DisciplineID === discipline
                        );
                        matches = matches && !!mcd;
                    }
                }

                return matches;
            });

            displayImages();
        }

        function displayImages() {
            const grid = document.getElementById('imagesGrid');
            const count = document.getElementById('resultsCount');

            count.textContent = `Showing ${filteredAttachments.length} image${filteredAttachments.length !== 1 ? 's' : ''}`;

            if (filteredAttachments.length === 0) {
                grid.innerHTML = `
                    <div class="no-results" style="grid-column: 1 / -1;">
                        <div class="no-results-icon">🔍</div>
                        <h3 style="margin-bottom:8px;">No images found</h3>
                        <p>Try adjusting your filters or search terms</p>
                    </div>
                `;
                return;
            }

            grid.innerHTML = filteredAttachments.map(att => {
                const version = modelCodeVersions.find(v => v.ModelCodeVersionID === att.ModelCodeVersionID);
                const code = version ? modelCodes.find(c => c.ModelCodeID === version.ModelCodeID) : null;
                const chapter = codeChapters.find(ch =>
                    ch.ModelCodeVersionID === att.ModelCodeVersionID &&
                    ch.Chapter === att.Chapter
                );

                const typeLabel = att.Type === 'T' ? 'Table' : att.Type === 'F' ? 'Figure' : 'Other';
                const placeholderClass = att.Type === 'T' ? 'table' : 'figure';
                const placeholderIcon = att.Type === 'T' ? '📊' : '📈';

                return `
                    <div class="image-card" onclick='openImageModal(${JSON.stringify(att).replace(/'/g, "\\'")}  )'>
                        <div class="image-placeholder ${placeholderClass}">
                            <div style="font-size:64px;">${placeholderIcon}</div>
                            <span class="image-type-badge">${typeLabel}</span>
                        </div>
                        <div class="image-info">
                            <div class="image-tags">
                                <span class="image-tag">${code ? code.ModelCodeName : 'Unknown'} ${version ? version.Year || '' : ''}</span>
                                <span class="image-tag">Ch. ${att.Chapter}</span>
                                ${att.Number ? `<span class="image-tag">${att.Number}</span>` : ''}
                            </div>
                            <div class="image-title">${att.AttachTitleEN || 'Untitled'}</div>
                            ${att.AttachTitleKR ? `<div class="image-subtitle">${att.AttachTitleKR}</div>` : ''}
                            <div class="image-meta">
                                <span class="image-location">§${att.Section || ''}${att.Subsection ? '.' + att.Subsection : ''}</span>
                                <div class="image-actions">
                                    <button class="icon-btn" title="Bookmark" onclick="event.stopPropagation()">🔖</button>
                                    <button class="icon-btn" title="Download" onclick="event.stopPropagation()">⬇️</button>
                                    <button class="icon-btn" title="Share" onclick="event.stopPropagation()">↗️</button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function openImageModal(attachment) {
            const modal = document.getElementById('imageModal');
            const version = modelCodeVersions.find(v => v.ModelCodeVersionID === attachment.ModelCodeVersionID);
            const code = version ? modelCodes.find(c => c.ModelCodeID === version.ModelCodeID) : null;
            const chapter = codeChapters.find(ch =>
                ch.ModelCodeVersionID === attachment.ModelCodeVersionID &&
                ch.Chapter === attachment.Chapter
            );

            const typeLabel = attachment.Type === 'T' ? 'Table' : attachment.Type === 'F' ? 'Figure' : 'Other';
            const placeholderIcon = attachment.Type === 'T' ? '📊' : '📈';

            document.getElementById('modalTitle').textContent = attachment.AttachTitleEN || 'Untitled';
            document.getElementById('modalSubtitle').textContent = attachment.AttachTitleKR || '';

            const placeholder = document.getElementById('modalImagePlaceholder');
            placeholder.innerHTML = `<div style="font-size:96px;">${placeholderIcon}</div>`;
            placeholder.className = `modal-image-placeholder ${attachment.Type === 'T' ? 'table' : 'figure'}`;

            const details = document.getElementById('modalDetails');
            details.innerHTML = `
                <div class="detail-row">
                    <div class="detail-label">Code Type:</div>
                    <div class="detail-value">${code ? code.ModelCodeName : 'Unknown'} ${version ? version.Year || '' : ''}</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label">Chapter:</div>
                    <div class="detail-value">Chapter ${attachment.Chapter}${chapter ? ': ' + chapter.TitleEN : ''}</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label">Location:</div>
                    <div class="detail-value">Section ${attachment.Section || ''}${attachment.Subsection ? '.' + attachment.Subsection : ''}</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label">Type:</div>
                    <div class="detail-value">${typeLabel}${attachment.Number ? ' ' + attachment.Number : ''}</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label">File Name:</div>
                    <div class="detail-value">${attachment.FileName || 'N/A'}</div>
                </div>
                ${attachment.AttachContentEN ? `
                    <div class="detail-row">
                        <div class="detail-label">Description (EN):</div>
                        <div class="detail-value">${attachment.AttachContentEN}</div>
                    </div>
                ` : ''}
                ${attachment.AttachContentKR ? `
                    <div class="detail-row">
                        <div class="detail-label">Description (KR):</div>
                        <div class="detail-value">${attachment.AttachContentKR}</div>
                    </div>
                ` : ''}
                ${attachment.AttachComment ? `
                    <div class="detail-row">
                        <div class="detail-label">Comment:</div>
                        <div class="detail-value">${attachment.AttachComment}</div>
                    </div>
                ` : ''}
            `;

            modal.classList.add('active');
        }

        function closeModal() {
            document.getElementById('imageModal').classList.remove('active');
        }

        function resetFilters() {
            document.getElementById('searchInput').value = '';
            document.getElementById('filterCodeType').value = '';
            document.getElementById('filterChapter').value = '';
            document.getElementById('filterImageType').value = '';
            document.getElementById('filterDiscipline').value = '';
            filterImages();
        }

        function setView(viewType) {
            document.querySelectorAll('.view-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            // View mode change logic can be implemented here
        }

        function sortImages() {
            const sortBy = document.getElementById('sortBy').value;

            switch(sortBy) {
                case 'code':
                    filteredAttachments.sort((a, b) =>
                        a.ModelCodeVersionID.localeCompare(b.ModelCodeVersionID)
                    );
                    break;
                case 'chapter':
                    filteredAttachments.sort((a, b) => a.Chapter - b.Chapter);
                    break;
                case 'type':
                    filteredAttachments.sort((a, b) => a.Type.localeCompare(b.Type));
                    break;
                default:
                    // Most recent (default order)
                    filteredAttachments = [...attachments].filter(att =>
                        filteredAttachments.includes(att)
                    );
            }

            displayImages();
        }

        function updatePerPage() {
            // Pagination logic can be implemented here
            displayImages();
        }

        function openFilters() {
            const filters = document.getElementById('filtersSection');
            filters.style.display = filters.style.display === 'none' ? 'block' : 'none';
        }

        // Close modal on outside click
        window.onclick = function(event) {
            const modal = document.getElementById('imageModal');
            if (event.target === modal) {
                closeModal();
            }
        }

        // Initialize
        loadData();
    </script>
</body>
</html>
